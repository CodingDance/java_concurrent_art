#第9章 Java中的线程池

带来的好处：
    
    1.降低资源消耗：通过重复利用已创建的线程降低线程创建和销毁造成的消耗
    2.提高响应速度：任务到达时，任务可以不需要等到线程创建就能立即执行
    3.提高线程的可管理性
    
##一、实现原理

提交一个新任务到线程池，处理流程：

    1.判断核心线程池里的线程是否都在执行任务。如果不是，则创建一个新的工作线程执行任务。如果是，则进入2
    2.判断工作队列是否已满，如果工作队列没有满，则将新提交的任务存储在这个工作队列里。如果工作队列满，进入3
    3.判断线程池的线程是否都处于工作状态。如果没有，则创建新的工作线程来执行任务。如果满了，则交给饱和
    策略来处理这个任务。
    
以ThreadPoolExecutor执行execute方法举例，分为4种情况：

    1.如果当前运行线程数少于corePoolSize，则创建新线程来执行任务
    2.如果运行的线程等于或多余corePoolSize，则将任务加入BlockingQueue
    3.如果BlockingQueue已满，则创建新的线程来处理任务
    4.如果创建新线程将使当前运行的线程超出maximumPoolSize，任务将被拒绝，并调用对应的策略
    
工作线程：线程池创建线程时，会将线程封装成工作线程Worker，Worker在执行完任务后，还会循环获取工作队列里
的任务来执行。

##二、线程池的使用

用ThreadPoolExecutor来创建

corePoolSize：线程池的基本大小：当提交一个任务到线程池时，线程池会创建一个线程执行任务，
即使其他空闲的基本线程能够执行新任务也会创建线程，等到需要执行的任务数大于线程池基本大小
时就不再继续创建。

提交任务：execute提交不需要返回值得任务，submit提交需要返回值的

